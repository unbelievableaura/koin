diff --git a/node_modules/nostalgist/dist/nostalgist.js b/node_modules/nostalgist/dist/nostalgist.js
index 2c9f72c..7430eaf 100644
--- a/node_modules/nostalgist/dist/nostalgist.js
+++ b/node_modules/nostalgist/dist/nostalgist.js
@@ -2066,6 +2066,8 @@ function isInteractable(element) {
 class Emulator {
   blobUrlJs;
   blobUrlWasm;
+  cachedKeyboardCodes = null;
+  cachedRetroarchConfigMtime = 0;
   canvasInitialSize = { height: 0, width: 0 };
   emscripten;
   eventListeners = {
@@ -2338,9 +2340,20 @@ class Emulator {
     return !size || size === "auto" ? { height: element.offsetHeight, width: element.offsetWidth } : size;
   }
   getKeyboardCode(button, player = 1) {
-    const config = this.getCurrentRetroarchConfig();
+    const stats = this.fs.stat(EmulatorFileSystem.configPath);
+    const currentMtime = stats ? stats.mtime.getTime() : 0;
+    if (!this.cachedKeyboardCodes || currentMtime > this.cachedRetroarchConfigMtime) {
+      const config = this.getCurrentRetroarchConfig();
+      this.cachedKeyboardCodes = /* @__PURE__ */ new Map();
+      this.cachedRetroarchConfigMtime = currentMtime;
+      for (const configKey in config) {
+        if (configKey.startsWith("input_player")) {
+          this.cachedKeyboardCodes.set(configKey, config[configKey]);
+        }
+      }
+    }
     const configName = `input_player${player}_${button}`;
-    const key = config[configName];
+    const key = this.cachedKeyboardCodes.get(configName);
     if (!key || key === "nul") {
       return;
     }
@@ -2384,11 +2397,9 @@ class Emulator {
   }
   postRun() {
     this.resize(this.canvasInitialSize);
-    for (const gamepad of navigator.getGamepads?.() ?? []) {
-      if (gamepad) {
-        globalThis.dispatchEvent(new GamepadEvent("gamepadconnected", { gamepad }));
-      }
-    }
+    // Synthetic gamepadconnected dispatch removed via patch â€” prevents RetroArch
+    // autoconfig from overriding custom button mappings set via retroarchConfig.
+    // The joypad driver still polls navigator.getGamepads() directly each frame.
     this.updateKeyboardEventHandlers();
   }
   recordGlobalDOMEventListeners() {
diff --git a/node_modules/nostalgist/dist/nostalgist.umd.js b/node_modules/nostalgist/dist/nostalgist.umd.js
index 26338ea..ee9c656 100644
--- a/node_modules/nostalgist/dist/nostalgist.umd.js
+++ b/node_modules/nostalgist/dist/nostalgist.umd.js
@@ -2070,6 +2070,8 @@
   class Emulator {
     blobUrlJs;
     blobUrlWasm;
+    cachedKeyboardCodes = null;
+    cachedRetroarchConfigMtime = 0;
     canvasInitialSize = { height: 0, width: 0 };
     emscripten;
     eventListeners = {
@@ -2342,9 +2344,20 @@
       return !size || size === "auto" ? { height: element.offsetHeight, width: element.offsetWidth } : size;
     }
     getKeyboardCode(button, player = 1) {
-      const config = this.getCurrentRetroarchConfig();
+      const stats = this.fs.stat(EmulatorFileSystem.configPath);
+      const currentMtime = stats ? stats.mtime.getTime() : 0;
+      if (!this.cachedKeyboardCodes || currentMtime > this.cachedRetroarchConfigMtime) {
+        const config = this.getCurrentRetroarchConfig();
+        this.cachedKeyboardCodes = /* @__PURE__ */ new Map();
+        this.cachedRetroarchConfigMtime = currentMtime;
+        for (const configKey in config) {
+          if (configKey.startsWith("input_player")) {
+            this.cachedKeyboardCodes.set(configKey, config[configKey]);
+          }
+        }
+      }
       const configName = `input_player${player}_${button}`;
-      const key = config[configName];
+      const key = this.cachedKeyboardCodes.get(configName);
       if (!key || key === "nul") {
         return;
       }
diff --git a/node_modules/nostalgist/dist/types/classes/emulator.d.ts b/node_modules/nostalgist/dist/types/classes/emulator.d.ts
index 762e35d..fb892f1 100644
--- a/node_modules/nostalgist/dist/types/classes/emulator.d.ts
+++ b/node_modules/nostalgist/dist/types/classes/emulator.d.ts
@@ -14,6 +14,8 @@ interface EmulatorEmscripten {
 export declare class Emulator {
     private blobUrlJs;
     private blobUrlWasm;
+    private cachedKeyboardCodes;
+    private cachedRetroarchConfigMtime;
     private canvasInitialSize;
     private emscripten;
     private eventListeners;
